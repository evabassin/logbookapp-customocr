<!-- call this endpoint 'http://13.237.180.14/api/medical/ocr' -->

<!DOCTYPE html>
<html>
<body>

<h1>The Cognitive Co</h1>

<p>This is a page to demonstrate the API endpoints created for the medical project.</p>

<!-- Functions -->
<script type="text/javascript">  

  function ocr(){    
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4) {       
        document.getElementById("ocr_out").innerHTML = this.responseText;
      }
    }
    var url = "http://127.0.0.1:8000/api/medical/ocr/";
    var mystring=document.getElementById("template_name").value;
    var fileLoader=document.getElementById("jsonFile0");
    var myfile = fileLoader.files[0]
    var formData = new FormData();
    formData.append("image", myfile);
    url = url + mystring;
    xhttp.open("POST", url, true);
    xhttp.send(formData);
  };  

  function newTemplate(){    
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 ) {
        document.getElementById("new").innerHTML = this.responseText;
      }
    }
    var url = "http://127.0.0.1:8000/api/medical/sticker/";
    var mystring=document.getElementById("new_name").value;
    var fileLoader=document.getElementById("jsonFile1");
    var myfile = fileLoader.files[0]
    var formData = new FormData();
    formData.append("region_json", myfile);
    url = url + mystring;
    xhttp.open("POST", url, true);
    xhttp.send(formData);
  };  

  function updateTemplate(){    
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 ) {
        document.getElementById("update").innerHTML = this.responseText;
      }
    }
    var url = "http://127.0.0.1:8000/api/medical/sticker/";
    var mystring=document.getElementById("update_name").value;
    var fileLoader=document.getElementById("jsonFile2");
    var myfile = fileLoader.files[0]
    var formData = new FormData();
    formData.append("region_json", myfile);
    url = url + mystring;
    xhttp.open("PATCH", url, true);
    xhttp.send(formData);
  };  

  function selectTemplate(){    
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 ) {
        document.getElementById("selected").innerHTML = this.responseText;
      }
    };
    var url = "http://127.0.0.1:8000/api/medical/sticker/";
    var mystring=document.getElementById("sel_name").value;
    url = url + mystring;
    xhttp.open("GET", url, true);
    xhttp.send();
  }; 

  function getAllStickers(){  
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 ) {
        document.getElementById("allStickers").innerHTML = this.responseText;
      }
    };
    var url = "http://127.0.0.1:8000/api/medical/sticker/";
    xhttp.open("GET", url, true);
    xhttp.send();
  };  

  function delTemplate(){    
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 ) {
        document.getElementById("deleted").innerHTML = this.responseText;
      }
    };
    var url = "http://127.0.0.1:8000/api/medical/sticker/";
    var mystring=document.getElementById("del_name").value;
    url = url + mystring;
    xhttp.open("DELETE", url, true);
    xhttp.send();
  }; 

</script>  




<!-- 
<form class="FileUploadForm" action="http://atomiccx.co/api/medical/ocr" method=post enctype=multipart/form-data>
    <p><strong>Upload Image:</strong></p>
      <p>Template Name:  <input type="text" name=template_name value="rnsh">
      <p><strong>Select from templates below:</strong></p>
      <p>Symantic language rules approach</p>
      <ul>
        <li>gosford</li>
        <li>royal north shore</li>
      </ul>
      <p>Image region based approach</p>
      <ul>
        <li>mater1</li>
        <li>mater2</li>
        <li>nsp</li>
        <li>pow1</li>
        <li>pow2</li>
        <li>san</li>
      </ul>
      <input type=file name=image> <br><br>
      <input type=submit value=Upload>
  </form>
  <p>Note: This algorithm uses regular expression rules for Gosford and Royal North Shore Hospital. 
    All other hospitals uses a region based approach.</p><br>  -->


<!-- OCR Sticker -->
<form>  
  <p><strong>Upload Image:</strong></p>
  <p>Template Name:  <input type="text" id="template_name" name="template_name" value="e.g. rnsh"/><br/>  
    <p><strong>Select from templates below:</strong></p>
    <p>Symantic language rules approach</p>
    <ul>
      <li>gosford</li>
      <li>royal north shore</li>
    </ul>
    <p>Image region based approach</p>
    <ul>
      <li>mater1</li>
      <li>mater2</li>
      <li>nsp</li>
      <li>pow1</li>
      <li>pow2</li>
      <li>san</li>
    </ul>
  <p>Choose JSON File <input type="file" id="jsonFile0" name="image"/><br><br>
  <input type="button" value="Submit" onclick="ocr()"/>  
</form>  
<p>Output: </p><p id="ocr_out"></p>
<br>
<br>
<!-- End OCR Sticker-->

<!-- New template -->
<form>  
  <p><strong>New Sticker Template: </strong> </p>
  <p>Template Name:  <input type="text" id="new_name" name="template_name" value="e.g. rnsh"/><br/>  
  <p>Choose JSON File <input type="file" id="jsonFile1" name="region_json"/><br><br>
  <input type="button" value="Submit" onclick="newTemplate()"/>  
</form>  
<p>Output: </p><p id="new"></p>
<br>
<br>
<!-- New template -->

<!-- Update template -->
<form>  
  <p><strong>Update Sticker Template: </strong> </p>
  <p>Template Name:  <input type="text" id="update_name" name="template_name" value="e.g. rnsh"/><br/>  
  <p>Choose JSON File <input type="file" id="jsonFile2" name="region_json"/><br><br>
  <input type="button" value="Submit" onclick="updateTemplate()"/>  
</form>  
<p>Output: </p><p id="update"></p>
<br>
<br>
<!-- Update template -->

<!-- Select All Stickers -->
<form>  
  <p><strong>Select All Sticker Templates: </strong> </p>
  <input type="button" value="Submit" onclick="getAllStickers()"/>  
</form>  
<p>Output: </p><p id="allStickers"></p>
<br>
<br>
<!-- Select All Stickers -->


<!-- Delete template by name -->
<form>  
  <p><strong>Delete Sticker Template: </strong> </p>
  <p>Template Name:  <input type="text" id="del_name" name="template_name" value="e.g. rnsh"/><br/><br>
  <input type="button" value="Submit" onclick="delTemplate()">  
</form>  
<p>Output: </p><p id="deleted"></p>
<br>
<br>
<!-- End delete template by name -->

<!-- Select template by name -->
<form>  
  <p><strong>Select Sticker Template: </strong> </p>
  <p>Template Name:  <input type="text" id="sel_name" name="template_name" value="e.g. rnsh"/><br/><br>  
  <input type="button" value="Submit" onclick="selectTemplate()">  
</form>  
<p>Output: </p><p id="selected"></p>
<br>
<br>
<!-- Select delete template by name -->


</body>
</html>
